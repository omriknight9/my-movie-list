let cinematicType,selectedDiv,lastChar,searchVal,marvelMovies=[],dcMovies=[],valiantMovies=[],otherMovies=[],animationMovies=[],tvShows=[],ultraMovies=[],counter=1,marvelCinematicCounter=1,dcCinematicCounter=1,marvelCounter=1,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1,mcuWasSorted=!1,dceuWasSorted=!1;const tmdbKey="0271448f9ff674b76c353775fa9e6a82";$(document).ready(e=>{loadJson(),window.onbeforeunload=(()=>{window.scrollTo(0,0)}),window.onscroll=(()=>{scrollBtn()}),$(".Xbtn").click(function(){$($(this).parent().parent()).hasClass("animated")&&$(selectedDiv).css({border:"0 solid black"}).animate({borderWidth:0},200),$(this).parent().parent().fadeOut(150),$("#trailerVideo").attr("src","")}),setTimeout(()=>{$(".spinnerWrapper").hide(),$(".searchContainer").show(),$("button").show(),$(".container").css("display","flex")},500),$("#search").on("input",()=>{let e;searchVal=$("#search").val()," "!=(lastChar=searchVal.substr(searchVal.length-1))&&($("#searchResults").empty(),$.each($(".tvShowWrapper"),(e,t)=>{let a=$(t).attr("numId");showResult($(".tvShowWrapper"),$(".tvShowImg"),$(t),a)}),$.each($(".movieWrapper"),(t,a)=>{let o=$(a).attr("numId");$(a).hasClass("marvelMovie")?e=1:$(a).hasClass("dcMovie")?e=2:$(a).hasClass("valiantMovie")?e=3:$(a).hasClass("otherMovie")?e=4:$(a).hasClass("animationMovie")?e=5:$(a).hasClass("ultraMovie")&&(e=6),showResult($(".movieWrapper"),$(".movieImg"),$(a),o,e)}))})});const hasClass=(e,t)=>new RegExp(" "+t+" ").test(" "+e.className+" "),addClass=(e,t)=>{hasClass(e,t)||(e.className+=" "+t)},removeClass=(e,t)=>{var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}},toggleClass=(e,t)=>{var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}else e.className+=" "+t},showResult=(e,t,a,o,r)=>{for(let n=0;n<$(a).length;n++){let i,s,l=$($(a)[n]).find($(".name")).html(),c=$($(a)[n]).find(t).attr("src"),d=searchVal.charAt(0).toUpperCase()+searchVal.slice(1);0==searchVal.length||$(".result").length<1?$("#searchResults").hide():$("#searchResults").show();try{i=capitalize(l),s=capitalize(d)}catch(e){return}if(i.includes(s)||i.includes(s.toLowerCase())){let t=$("<div>",{class:"result",resultType:r,movieNum:o,click:function(){switch($(this).attr("resultType")){case"1":e="#marvelContainer .movieWrapper";break;case"2":e="#dcContainer .movieWrapper";break;case"3":e="#valiantContainer .movieWrapper";break;case"4":e="#othersContainer .movieWrapper";break;case"5":e="#animationContainer .movieWrapper";break;case"6":e="#ultraContainer .movieWrapper"}let t=this;$.each($(e),function(e,a){$(t).attr("movieNum")==$(this).attr("numId")&&($("body").css("pointer-events","none"),goToResult(selectedDiv=this),$("#movieDetails").addClass("animated"),$(selectedDiv).find($(".movieImg")).css({border:"0 solid black"}).animate({borderWidth:6},500),setTimeout(()=>{$(selectedDiv).find($(".movieImg")).css({border:"0 solid black"}).animate({borderWidth:0},500),$("#movieDetails").removeClass("animated")},2500),$("#searchResults").hide(),$("#search").val(""),setTimeout(()=>{$(selectedDiv).click(),$("body").css("pointer-events","all")},1500))})}}).appendTo($("#searchResults")),a=$("<div>",{class:"resultImgWrapper"}).appendTo(t);$("<img>",{class:"resultImg",src:c}).appendTo(a),$("<p>",{class:"resultName",text:i}).appendTo(t)}}},capitalize=e=>{e=e.split(" ");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join(" ")},loadJson=()=>{var e=new Promise(e=>{e(getInfo("marvel",marvelMovies,"marvelMovie",$("#marvelContainer"),1))});e.then(()=>{getInfo("dc",dcMovies,"dcMovie",$("#dcContainer"),2)}),e.then(()=>{getInfo("valiant",valiantMovies,"valiantMovie",$("#valiantContainer"),3)}),e.then(()=>{getInfo("others",otherMovies,"otherMovie",$("#othersContainer"),4)}),e.then(()=>{getInfo("animation",animationMovies,"animationMovie",$("#animationContainer"),5)}),e.then(()=>{$.get("./lists/tvShows.txt",e=>{tvShows.push(JSON.parse(e)),buildTvShow("tvShow",$("#tvShowContainer"),tvShows)})}),e.then(()=>{getInfo("4k",ultraMovies,"ultraMovie",$("#ultraContainer"),6)})},getInfo=(e,t,a,o,r)=>{$.get("./lists/"+e+".txt",e=>{t.push(JSON.parse(e)),buildMovies(a,o,t,r)})},goToDiv=e=>{document.querySelector(e).scrollIntoView({behavior:"smooth"})},goToResult=e=>{$(window).width(),$("html, body").animate({scrollTop:$(e).offset().top-150},1e3),setTimeout(()=>{$("html, body").animate({scrollTop:$(window).scrollTop()+10})},2e3)},buildMovies=(e,t,a,o)=>{$("#trailerVideo").attr("src","");let r,n,i,s,l,c,d,m,u,p,h,v=a[0].movies;switch(o){case 1:r="Marvel",n="marvelBtn",i="btnMCU",s="MCU Only",l="Non MCU",c="btnAllMarvel",d="All Marvel",m=$("#marvelContainer"),u=".marvelMovie",p="mcu",h="lineMarvel";break;case 2:r="DC",n="dcBtn",i="btnDCEU",s="DCEU Only",l="Non DCEU",c="btnAllDC",d="All DC",m=$("#dcContainer"),u=".dcMovie",p="dceu",h="lineDc";break;case 3:r="Valiant",n="valiantBtn",m=$("#valiantContainer"),h="lineValiant";break;case 4:r="Others",n="othersBtn",m=$("#othersContainer"),h="lineOthers";break;case 5:r="Animation",n="animationBtn",m=$("#animationContainer"),h="lineAnimation";break;case 6:r="4K Movies",n="ultraBtn",m=$("#ultraContainer"),h="lineUltra"}$("<h2>",{class:"typeheader",text:r}).appendTo(t);let C=$("<div>",{class:"line "+h}).appendTo(t),f=($("<span>",{class:"headerLogo"}).appendTo(C),$("<div>",{class:"moviesContent"}).appendTo(t));if(6!==o&&3!==o){let e=$("<div>",{class:"btnWrapper"}).appendTo(f),t=$("<div>",{class:"sortContainer"}).appendTo(e),a=$("<div>",{class:"sortContent"}).appendTo(t);$("<button>",{class:n,text:"Sort",click:function(){sort($(this).parent().parent(),o)}}).appendTo(e),$("<button>",{class:n,text:"By Date",click:()=>{sortMovies(m,"date",1)}}).appendTo(a),$("<button>",{class:n,text:"By Name",click:()=>{sortMovies(m,"name",2)}}).appendTo(a),$("<button>",{class:n,text:"By Runtime",click:()=>{sortMovies(m,"runtime",4)}}).appendTo(a);if(1==o)$("<button>",{id:"nextMcuFilmBtn",text:"Next MCU Film",click:function(){$.get("https://api.themoviedb.org/3/list/140624?api_key="+tmdbKey+"&language=en-US",e=>{let t=e.items,a=[];for(let e=0;e<t.length;e++)if("movie"==t[e].media_type&&""!==t[e].release_date&&void 0!==t[e].release_date&&null!==t[e].release_date){let o={id:t[e].id,name:t[e].title,date:t[e].release_date,poster:t[e].poster_path};a.push(o)}setTimeout(()=>{const t=new Date;let o=1/0,r=1/0,n=a;a.forEach(function(e){const a=new Date(e.date);a>=t&&(a<new Date(o)||a<o)&&(o=e)});const i=n.indexOf(o);n.splice(i,1),n.forEach(function(e){const a=new Date(e.date);a>=t&&(a<new Date(r)||a<r)&&(r=e)});let s=o.poster;s=null==s?"./images/stockMovie.jpg":"https://image.tmdb.org/t/p/w1280"+o.poster;const l=t,c=new Date(o.date),d=new Date(r.date),m=Math.round(Math.abs((l-c)/864e5)+1),u=Math.round(Math.abs((l-d)/864e5)+1);$("#daysToMovie").html(m),$("#dateOfNextMovie").html(configureDate(o.date)),$("#nextMcuTitle").html(o.name),$("#mcuLink").attr("href","https://omriknight9.github.io/omris-movies/?title="+o.name+"&value="+o.id),$("#nextMcuImg").attr({src:s,alt:e.name}),$("#afterNextMovieTitle").html(r.name),$("#afterNextMovieDays").html(u),$("#afterNextMovieDate").html(configureDate(r.date)),$("#nextMcuFilmPop").show()},0)})}}).appendTo(e);if(1==o||2==o)$("<button>",{class:n,id:i,text:s,click:function(){1==o?(cinematicType=1,1==marvelCinematicCounter?(showCinematicUniverse(u,p,mcuWasSorted),marvelCinematicCounter=2,$(this).html(l)):(hideCinematicUniverse(u,p,mcuWasSorted),marvelCinematicCounter=1,$(this).html(s))):2==o&&(cinematicType=2,1==dcCinematicCounter?(showCinematicUniverse(u,p,dceuWasSorted),dcCinematicCounter=2,$(this).html(l)):(hideCinematicUniverse(u,p,dceuWasSorted),dcCinematicCounter=1,$(this).html(s))),$(".sortContainer").fadeOut("fast"),marvelCounter=1,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1}}).appendTo(e),$("<button>",{class:n,id:c,text:d,click:()=>{1==o?allOfKind(u,mcuWasSorted):2==o&&allOfKind(u,dceuWasSorted)}}).appendTo(e)}for(let t=0;t<v.length;t++){let a;a=(a=(a=(a=v[t].name.replace(/'/,"")).replace(/-/,"")).replace(/:/,"")).replace(/\s/g,"");let r=configureDate(v[t].date),n=$("<div>",{numId:v[t].id,class:"movieWrapper "+e,name:a,quality:v[t].quality,imdbId:v[t].imdbId,runtime:v[t].runtime,trailer:v[t].trailer,date:v[t].date,mcu:v[t].mcu,dceu:v[t].dceu,value:v[t].value,click:function(){switch($("#movieCover").attr("src",$(this).find(".movieImg").attr("src")),$(".movieRuntimePop").html("Runtime: "+convertMinsToHrsMins($(this).attr("runtime"))),$(".movieNamePop").html($(this).find($(".name")).html()),$(".movieQualityPop").html("Quality: "+$(this).attr("quality")),$("#movieImdbLink").attr("href","https://www.imdb.com/title/"+$(this).attr("imdbId")),$("#moviePopcornLink").attr("href","https://omriknight9.github.io/omris-movies/?title="+$(this).attr("name")+"&value="+$(this).attr("value")),$("#trailerVideo").attr("src","https://www.youtube.com/embed/"+$(this).attr("trailer")),$("#movieDetails").fadeIn(150),o){case 1:$(".popupBtn").css("background-color","#e62429");break;case 2:$(".popupBtn").css("background-color","#0282f9");break;case 3:$(".popupBtn").css("background-color","rgba(100, 100, 255, .9)");break;case 4:$(".popupBtn").css("background-color","rgba(100, 200, 100, .9)");break;case 5:$(".popupBtn").css("background-color","rgba(200, 200, 100, .9)");break;case 6:$(".popupBtn").css("background-color","rgba(0, 204, 255, .9)")}$("#movieYoutubeImage").click(()=>{$("#movieDetails").hide(),$("#trailer").fadeIn(150),setTimeout(()=>{$("#trailerVideo").attr("src",$("#trailerVideo").attr("src").replace("?autoplay=1&amp;rel=0&enablejsapi=1","")),$("#trailerVideo").attr("src",$("#trailerVideo").attr("src")+"?autoplay=1&amp;rel=0&enablejsapi=1")},500)})}}).appendTo(f);$("<img>",{class:"movieImg",alt:"movieImg",src:"./images/movies/"+v[t].image}).appendTo(n),$("<p>",{class:"name",text:v[t].name}).appendTo(n),$("<p>",{class:"date",text:r}).appendTo(n)}},configureDate=e=>{let t=new Date(e),a=t.getDate(),o=t.getMonth()+1;return(a=a<10?"0"+a:a)+"/"+(o=o<10?"0"+o:o)+"/"+t.getFullYear()},sort=(e,t)=>{switch($.each($(".sortContainer"),function(e,t){$(this).fadeOut("fast")}),t){case 1:1==marvelCounter?($(e).find($(".sortContainer")).fadeIn("fast"),marvelCounter=2,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1):($(e).find($(".sortContainer")).fadeOut("fast"),marvelCounter=1);break;case 2:1==DCCounter?($(e).find($(".sortContainer")).fadeIn("fast"),DCCounter=2,marvelCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1):($(e).find($(".sortContainer")).fadeOut("fast"),DCCounter=1);break;case 3:1==valiantCounter?($(e).find($(".sortContainer")).fadeIn("fast"),valiantCounter=2,marvelCounter=1,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1):($(e).find($(".sortContainer")).fadeOut("fast"),valiantCounter=1);break;case 4:1==othersCounter?($(e).find($(".sortContainer")).fadeIn("fast"),othersCounter=2,marvelCounter=1,valiantCounter=1,DCCounter=1,animationCounter=1):($(e).find($(".sortContainer")).fadeOut("fast"),othersCounter=1);break;case 5:1==animationCounter?($(e).find($(".sortContainer")).fadeIn("fast"),animationCounter=2,marvelCounter=1,valiantCounter=1,DCCounter=1,othersCounter=1):($(e).find($(".sortContainer")).fadeOut("fast"),animationCounter=1)}},buildTvShow=(e,t,a)=>{$("#trailerVideo").attr("src","");let o=a[0].tvShows,r=($("<h2>",{class:"typeheader",text:"TV Shows"}).appendTo(t),$("<div>",{class:"line lineTvShows"}).appendTo(t)),n=($("<span>",{class:"headerLogo"}).appendTo(r),$("<div>",{id:"tvShowContent"}).appendTo(t));for(let t=0;t<o.length;t++){let a;a=(a=(a=(a=o[t].name.replace(/'/,"")).replace(/-/,"")).replace(/:/,"")).replace(/\s/g,"");let r=$("<div>",{numId:o[t].id,class:"tvShowWrapper "+e,year:o[t].year,name:a,quality:o[t].quality,imdbId:o[t].imdbId,seasons:o[t].seasons,episodes:o[t].episodes,trailer:o[t].trailer,click:function(){$("#tvShowCover").attr("src",$(this).find(".tvShowImg").attr("src")),$(".tvShowSeasonsPop").html("Seasons: "+$(this).attr("seasons")),$(".tvShowEpisodesPop").html("Episodes: "+$(this).attr("episodes")),$(".tvShowNamePop").html($(this).find($(".name")).html()),$(".tvShowQualityPop").html("Quality: "+$(this).attr("quality")),$("#tvShowImdbLink").attr("href","https://www.imdb.com/title/"+$(this).attr("imdbId")),$("#trailerVideo").attr("src","https://www.youtube.com/embed/"+$(this).attr("trailer")),$("#tvShowDetails").fadeIn(150),$(".popupBtn").css("background-color","#D67B6E"),$("#tvShowYoutubeImage").click(()=>{$("#tvShowDetails").hide(),$("#trailer").fadeIn(150),setTimeout(()=>{$("#trailerVideo").attr("src",$("#trailerVideo").attr("src").replace("?autoplay=1&amp;rel=0&enablejsapi=1","")),$("#trailerVideo").attr("src",$("#trailerVideo").attr("src")+"?autoplay=1&amp;rel=0&enablejsapi=1")},500)})}}).appendTo(n);$("<img>",{class:"tvShowImg",alt:"tvShowImg",src:"./images/"+o[t].image}).appendTo(r),$("<p>",{class:"name",text:o[t].name}).appendTo(r),$("<p>",{class:"year",text:"Year: "+o[t].year}).appendTo(r)}},showCinematicUniverse=(e,t)=>{for(let a=0;a<$(e).length;a++)$($(e)[a]).show(),"false"==$($(e)[a]).attr(t)&&$($(e)[a]).hide();for(let t=0;t<$(e).length;t++){let a=$($($(e)[t]).parent())[0];0==$(a).children(":visible").length?$(a).css("padding-bottom",0):$(a).css("padding-bottom","2rem")}},hideCinematicUniverse=(e,t)=>{for(let a=0;a<$(e).length;a++)$($(e)[a]).show(),"true"==$($(e)[a]).attr(t)&&$($(e)[a]).hide();for(let t=0;t<$(e).length;t++){let a=$($($(e)[t]).parent())[0];0==$(a).children(":visible").length?$(a).css("padding-bottom",0):$(a).css("padding-bottom","2rem")}},allOfKind=e=>{for(let t=0;t<$(e).length;t++){let a=$($($(e)[t]).parent())[0];switch($(a).css("padding-bottom","2rem"),$($(e)[t]).show(),cinematicType){case 1:marvelCinematicCounter=1,$("#btnMCU").html("MCU Only");break;case 2:dcCinematicCounter=1,$("#btnDCEU").html("DCEU Only")}}$(".sortContainer").fadeOut("fast"),marvelCounter=1,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1},goToTop=()=>{$("html,body").animate({scrollTop:0},1e3)},scrollBtn=()=>{$(this).scrollTop()>550?$("#goToTopBtn").fadeIn():$("#goToTopBtn").fadeOut()},sortMovies=(e,t,a)=>{let o,r=$(e).find($(".btnWrapper"));$(r).attr("kind")==a||($(r).attr("kind",a),counter=1),3==a&&($("#marvelContainer").empty(),$("#dcContainer").empty(),$("#valiantContainer").empty(),$("#othersContainer").empty(),$("#animationContainer").empty(),$("#tvShowContainer").empty(),mcuWasSorted=!1,dceuWasSorted=!1),$.each($(e),function(n,i){let s,l,c,d=[];for(l=0,c=(o="tvShowContainer"==$(e).attr("id")?$(this).find(".tvShowWrapper"):$(this).find(".movieWrapper")).length;l<c;l++){(s={}).element=o[l];let e=$(o[l]).attr(t);switch(a){case 1:s.idNum=new Date(e);break;case 2:s.idNum=e;break;case 3:case 4:s.idNum=parseInt(e.replace(/[^\d]/g,""),10)}d.push(s)}switch(a){case 1:switch(counter){case 1:d.sort((e,t)=>e.idNum-t.idNum),counter=2;break;case 2:d.sort((e,t)=>t.idNum-e.idNum),counter=1}$(r).attr("kind",a),mcuWasSorted=!0,dceuWasSorted=!0;break;case 2:switch(counter){case 1:d.sort((e,t)=>e.idNum>t.idNum?1:-1),counter=2;break;case 2:d.sort((e,t)=>e.idNum<t.idNum?1:-1),counter=1,mcuWasSorted=!0,dceuWasSorted=!0}$(r).attr("kind",a);break;case 3:switch($(".spinnerWrapper").show(),$(e).attr("id")){case"marvelContainer":setTimeout(()=>{$("#marvel").click()},1200);break;case"dcContainer":setTimeout(()=>{$("#dc").click()},1200);break;case"valiantContainer":setTimeout(()=>{$("#valiant").click()},1200);break;case"othersContainer":setTimeout(()=>{$("#others").click()},1200);break;case"animationContainer":setTimeout(()=>{$("#disney").click()},1200)}loadJson(),setTimeout(()=>{$(".spinnerWrapper").hide()},500);break;case 4:switch(counter){case 1:d.sort((e,t)=>e.idNum>t.idNum?1:-1),counter=2;break;case 2:d.sort((e,t)=>e.idNum<t.idNum?1:-1),counter=1,mcuWasSorted=!0,dceuWasSorted=!0}$(r).attr("kind",a)}for(l=0;l<d.length;l++)$(this).append(d[l].element)}),$(".sortContainer").fadeOut("fast"),marvelCounter=1,DCCounter=1,valiantCounter=1,othersCounter=1,animationCounter=1},removePopup=e=>{$(document).mouseup(t=>{e.is(t.target)&&0===e.has(t.target).length&&(e.hide(),t.stopPropagation(),$(document).off("mouseup"))})},closeCurrentPopup=e=>{$($(e)[0].parentElement.parentElement.parentElement).hasClass("animated")&&$(selectedDiv).css({border:"0 solid black"}).animate({borderWidth:0},200),$($(e)[0].parentElement.parentElement.parentElement).fadeOut(150)},convertMinsToHrsMins=e=>{let t=Math.floor(e/60),a=e%60;return a=a<10?""+a:a,(t=t<10?""+t:t)>1?0==a?t+" Hours":t+" Hours And "+a+" Minutes":0==a?t+" Hour":t+" Hour And "+a+" Minutes"};
